/**
* 为元素提供拖拉功能
*/
;(function(b){b.uiwidget=b.uiwidget||{};b.uiwidget.Drag=function(c,a){b.extend(this,a);this.el=b(c);this.setup()};b.uiwidget.Drag.prototype={setup:function(){this.handler=this.handler||this.el;this.el.css('position','absolute');this.el.css('z-index',b.uiwidget.Drag.z_index++);this.getHelper().css('cursor','move');this.handler.bind('mousedown',this,this.onMouseDown)},getHelper:function(){if(!this.helper){b(document.body).append('<div id="dragHelper" unselectable=on style="background-color: transparent;position:absolute;display:none:cursor:move;border:2px dotted #bbb;mozUserSelect:none;z-index:10000000001;left:-1000px;top:-1000px;"></div>');this.helper=b('#dragHelper')}return this.helper},onMouseDown:function(c){var a=c.data;a.el.css('z-index',b.uiwidget.Drag.z_index++);a._x=c.pageX-a.el.attr("offsetLeft");a._y=c.pageY-a.el.attr("offsetTop");a.getHelper().height(a.el.height());a.getHelper().width(a.el.width());a.getHelper().css("left",a.el.css('left'));a.getHelper().css("top",a.el.css('top'));b(document).bind("mousemove",a,a.onMouseMove);b(document).bind("mouseup",a,a.onMouseUp)},onMouseMove:function(c){var a=c.data;a.el.hide();a.getHelper().show();a.getHelper().css("left",c.pageX-a._x+"px");a.getHelper().css("top",c.pageY-a._y+"px")},onMouseUp:function(c){var a=c.data;a.el.css("left",a.getHelper().css('left'));a.el.css("top",a.getHelper().css("top"));a.el.show();a.getHelper().hide();b(document).unbind("mousemove");b(document).unbind("mouseup")}};b.uiwidget.Drag.z_index=1000000000;b.fn.drag=function(c){return new b.uiwidget.Drag(this,c)}})(jQuery);